Amazon S3는 AWS가 제공하는 스토리지 서비스이며, 파일 보존 및 다양한 기능을 갖추고 있다.

### S3의 특징
- **확장성** : EC2와 마찬가지로 확장, 축소가 쉽다. 사용 목적에 맞게 다양한 스토리지 클래스가 준비되어 있고 수명주기 정책을 사용하여 자동으로 이동이 가능하다.
- **가용성, 내구성** : **99.999999999%의 데이터 내구성**을 가지고 있어 장애나 오류, 위협에 강하다. S3 객체는 **최소 4개의 가용 영역에 자동으로 복제되어 보존**되기 때문에 어느 한쪽에 장애가 발생하더라도 계속 사용할 수 있다.
- **신뢰성** : **암호화 기능**과 **접근 관리 도**구가 있어 공격으로부터 지키기 쉽다. 각종 규정을 준수하며 감사 기능을 갖추고 있다.
- **다양한 관리 기능** : **스토리지 클래스 분석**, **수명 주기 정책**등을 시작으로 각종 관리 기능이 있다.
- **스마트한 기능** : **S3 Select**라는 **데이터에 쿼리를 실행하는 기능**과 서비스가 있다. 그 외에 Amazon Athena, Amazon Redshift Spectrum 등의 분석 서비스와 호환되고, AWS Lambda와 연동할 수 있다.

![aws21.png](image%2Faws21.png)

S3 요금은 스토리지 클래스(종류)와 리전에 따라 다르지만, 기본적으로 **보유하고 있는 용량**과 **전송량**을 기준으로 과금된다.

- 저장 용량 : 스토리지 클래스에 따라 일할 계산, 30, 90, 180일 단위로 계산하는 경우 등 방식이 다르다. 스토리지 클래스에 따라 최소 용량 요금이 설정되어 있다.
- 전송량 : S3에서 파일을 받거나 보낼 때 발생하는 요금이다. **GET**, **PUT** 요청에 대해 1GB 단위로 과금된다.

### 스토리지 클래스: 다양한 종류의 스토리지

스토리지 클래스는 Standard 외에도 엑세스 패턴에 따라 계층(비용이 다른 층)을 이동할 수 있는 클래스, 엑세스가 빈도가 낮은 데이터를 위한 클래스 등이 있어 사용자 목적에 따라 선택할 수 있다.

스토리지 클래스 별 특징

| **Standard**                                  | **Standard - Infrequent Access**                | **Reduced Redundancy Storage**     |
| --------------------------------------------- | ----------------------------------------------- | ---------------------------------- |
| 내구성이 높다<br>(99.999999999%)<br>가용성이 높다(99.99%) | 내구성이 높다<br>(99.999999999%)<br>가용성이 조금 낮다(99.9%) | 내구성이 낮다(99.99%)<br>가용성이 높다(99.99%) |

- Standard : 가장 일반적인 스토리지 클래스이다.
- **Standard - Infrequent Access** : 빈번한 엑세스와 간헐적 엑세스에 최적화된 두 가지 계층에 파일을 저장한다. 어느 쪽에 저장할지는 모니터링 결과에 따라 자동으로 이루어진다.
- **Reduced Redundancy Storage** : Standard에 비해 이중화 수준을 낮춰 낮은 가격으로 제공하고 있다.
- S3 Glacier/S3 Glacier Deep Archive : **데이터 아카이브**와 **장기간 백업**을 고려하여 만든 스토리지 클래스이다. 저렴한 가격으로 보관할 수 있지만 데이터는 '볼트'라고 하는 컨테이너에 저장된다. 따라서 저장된 데이터를 읽는 경우 다른 S3 버킷으로 옮겨야 하는 작업이 필요하다.

![aws22.png](image%2Faws22.png)

### S3의 사용 절차: 스토리지 서비스를 사용하기까지

- S3의 조작은 관리 콘솔의 대시보드에서 수행한다. 또한, API와 SDK를 사용하여 업로드할 수 있어 편리하다.
- S3의 구성 요소로 버킷, 객체 키(객체의 식별자) 등이 있다.
- S3는 생성한 후에는 이름과 리전을 변경할 수 없다.

### 객체와 버킷: 파일과 파일을 저장하는 장소

- S3에서는 드라이브를 버킷이라 한다.
- S3에서는 파일을 객체라 한다.
- 버킷을 생성하면 리전과 버킷명을 변경할 수 없기 때문에 신중하게 결졍해야 한다. 특히 버킷명은 S3 안에서 유일한 이름이어야 한다.
- 버킷에는 명명 규칙이 있다. (처음과 마지막에 알파벳이나 숫자를 사용해야 한다)

### 버킷 정책과 사용자 정책: 액세스 제한 설정

- S3 버킷에 대한 액세스 제한을 설정할 수 있다.
- 제한을 설정하는 방법은 3가지가 있다.
    - **버킷 정책** : 해당 버킷에 접속할 수 있는 사용자를 지정한다. (사용자가 많은 경우 유리)
    - **사용자 정책** : 사용자가 접속 가능한 버킷을 지정한다. (버킷이 많은 경우 유리)
    - **ACL(액세스 제어 목록)에 의한 관리 정책** : 다른 AWS 계정의 읽기/쓰기에 대해서 허가 혹은 거부를 설정
- 액세스 제한은 리소스, 작업, 효과, 보안 주체에 대해 설정할 수 있다. (누가, 무엇을, 어떤 것에 대해)
    - **리소스** : 제한 대상이 되는 버킷 및 객체이다. 아마존 리소스 이름을 사용하여 대상을 식별한다.
    - **작업** : 실제로 가능한 작업을 말하며, GET(취득), PUT(배치), DELETE(삭제)가 있다. 작업 키워드를 사용하여 지정한다.
    - **효과** : 설졍 여부를 말한다. 허가(allow), 거부(deny)를 설정한다.
    - **보안 주체** : 허가 혹은 거부할 사용자 및 계정, 서비스 등을 말한다.

### 웹 사이트 호스팅: 웹 사이트 공개

S3는 정적 웹 사이트를 호스팅할 수 있다.
- 정적 웹 호스팅 활성화
- 공용 엑세스 차단 해제
- 버킷 정책을 모든 사용자로 설정
- 버킷명을 도메인명으로 지정
- 개인 도메인을 소지한 경우 Route 53 등의 DNS 서비스 사용해 설정